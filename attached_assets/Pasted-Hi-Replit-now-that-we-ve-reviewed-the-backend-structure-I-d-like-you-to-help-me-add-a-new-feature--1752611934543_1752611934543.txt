Hi Replit, now that weâ€™ve reviewed the backend structure, Iâ€™d like you to help me add a new feature:

ðŸ§  Feature: Real-time social relationship inference using GPT-4o (few-shot prompting).

ðŸŽ¯ Goal:
- Automatically infer the relationship between users (e.g., FRIENDS_WITH, WORKS_WITH, FAMILY, UNKNOWN) based on message content.
- Update the Neo4j graph with inferred relationships (as edges between User nodes).

ðŸ“Œ Implementation Instructions:
1. Create a new service file: `server/services/relationshipInference.ts`
2. In it, define a class `RelationshipInferenceService` with the following methods:
   - `inferRelationships(message: Message, entities: Entity[]): Promise<Relationship[]>`
     - Uses OpenAIâ€™s GPT-4o model with few-shot prompting (I'll give you the prompt next).
     - Takes a message and known entities, infers the relationship (if any) between mentioned users.
     - Returns a list of inferred relationships.
   - `updateRelationshipGraph(relationships: Relationship[]): Promise<void>`
     - Writes the inferred relationships to Neo4j as edges like `(:User)-[:FRIENDS_WITH]->(:User)`, or updates weights if already exists.

3. In `server/routes.ts`, import and call `relationshipInferenceService.processMessage(message)` inside the POST `/api/messages` route, **after** message creation and entity extraction but **before** AI response generation.

4. Store relationship data in the existing Neo4j schema, or extend it with properties like `{confidence, inferred_from_message_id}` if needed.

ðŸ§  GPT Prompt to Use (few-shot):
You are a social reasoning assistant. Infer the most likely relationship between two users based on a short chat exchange.

Examples:

Ali: I went skiing with my buddy Sam this weekend.
Sam: Yeah, Ali totally bailed halfway through ðŸ˜‚
Relationship: FRIENDS_WITH
Zara: Iâ€™ll check with my boss, Alex, before we proceed.
Alex: Let me know what he says.
Relationship: WORKS_WITH
Layla: My cousin Fatima just graduated from NYU!
Fatima: Thanks Layla ðŸ˜„
Relationship: FAMILY
User A: Hi.
User B: Hello.
Relationship: UNKNOWN
{INSERT_NEW_MESSAGE}
Relationship:

csharp
Copy
Edit
